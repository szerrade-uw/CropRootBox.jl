   # if sum(lock) == 0 
	#lock[Threads.threadid()]=1
    	#shifted =  PythonCall.GIL.@lock pyrowlist(shifted) 
	#lock[Threads.threadid()]=0
    while !task_finished
		print("in loop")
		while sum(lock)==0
    			println("Check1: "*string(Threads.threadid())*" "*string(lock[1]))
   			print("out of loop in while"*string(sum(lock))
    			println("Check2: "*string(Threads.threadid())*" "*string(lock[1]))
			if !check_lock
				break
			end
    			shifted =  PythonCall.GIL.@lock pyrowlist(shifted) 
			lock[Threads.threadid()]=0
			if !check_lock
				break
			end
    			tri_mesh = PythonCall.GIL.@lock trimesh.Trimesh(vertices=shifted,faces=pyrowlist(faces(s)), vertex_normals=pyrowlist(s.normal), face_colors=pyrowlist(k))
    			lock[Threads.threadid()]=0
			println("trimesh worked")
			if !check_lock
				break
			end
    			PythonCall.GIL.@lock tri_mesh.export(f) 
    			println("file saved") 
    			lock[Threads.threadid()]= 0
			return true	
		end
    	end
	sleep(1)
    end